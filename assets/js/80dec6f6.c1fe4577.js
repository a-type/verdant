"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7189],{6019:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"local-storage/generate-client","title":"Generating the client code","description":"Using your schema, you can generate your typed client code using Verdant\'s CLI.","source":"@site/docs/local-storage/generate-client.md","sourceDirName":"local-storage","slug":"/local-storage/generate-client","permalink":"/docs/local-storage/generate-client","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Schema","permalink":"/docs/local-storage/schema"},"next":{"title":"Migrations","permalink":"/docs/local-storage/migrations"}}');var s=n(1273),r=n(8576);const c={sidebar_position:2},i="Generating the client code",a={},l=[];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"generating-the-client-code",children:"Generating the client code"})}),"\n",(0,s.jsxs)(t.p,{children:["Using your ",(0,s.jsx)(t.a,{href:"./schema",children:"schema"}),", you can generate your typed client code using Verdant's CLI."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"> npm i --dev @verdant-web/cli\n\n> verdant --schema src/stores/todos/schema.ts --output src/stores/todos/client --react\n"})}),"\n",(0,s.jsxs)(t.p,{children:["The CLI takes ",(0,s.jsx)(t.code,{children:"schema"})," (the path to your schema TS file), ",(0,s.jsx)(t.code,{children:"output"})," (the directory to output generated code), and ",(0,s.jsx)(t.code,{children:"--react"})," (optional, generates React hooks to query your data)."]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Important:"})," right now the input schema format for the CLI is quite strict. Ensure your schema is structured exactly the same as the one in ",(0,s.jsx)(t.a,{href:"./schema",children:"the schema docs"}),", particularly:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"collection"})," and ",(0,s.jsx)(t.code,{children:"schema"})," are used to wrap all definitions"]}),"\n",(0,s.jsx)(t.li,{children:"It has a default export of the schema itself"}),"\n",(0,s.jsx)(t.li,{children:"All collections are defined separately"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Now you can import your client from the output directory and construct it:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import { Client } from './client/index.js';\n// see next section!\nimport migrations from './migrations.js';\n\nconst client = new Client({\n\tnamespace: 'todos',\n\tmigrations,\n});\n\nclient.todoItems.put({\n\tid: '1',\n\tdetails: 'Create a Verdant client',\n\tdone: true,\n});\n"})}),"\n",(0,s.jsxs)(t.p,{children:["If you are building in React, be sure to pass ",(0,s.jsx)(t.code,{children:"--react"})," to the CLI and see the ",(0,s.jsx)(t.a,{href:"#react",children:"docs"})," on how to use it, since the built-in React support effectively hides the async waits for a much better DX!"]}),"\n",(0,s.jsx)(t.p,{children:"But before you can use the code above, you need to create your first migration."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8576:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>i});var o=n(3917);const s={},r=o.createContext(s);function c(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);